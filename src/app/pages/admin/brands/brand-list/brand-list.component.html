<div class="product-dashboard-layout">
    <!-- Sticky Command Header -->
    <header class="command-header">
        <div class="header-left">
            <h1 class="page-title">{{ 'ADMIN.BRANDS.TITLE' | translate }}</h1>
            <span class="product-count" *ngIf="paginationConfig.totalItems > 0">
                {{ paginationConfig.totalItems }} Brands
            </span>
        </div>

        <div class="header-right">
            <button class="btn-primary-action" routerLink="/admin/brands/new">
                <span class="icon">‚ûï</span>
                <span class="text">{{ 'ADMIN.BRANDS.BTN_ADD' | translate }}</span>
            </button>
        </div>
    </header>

    <!-- Main Content Area (Full Width) -->
    <main class="product-grid-view">

        <!-- Unified Search & Filter Toolbar -->
        <div class="table-toolbar">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()"
                    [placeholder]="'ADMIN.BRANDS.SEARCH_PLACEHOLDER' | translate">
            </div>

            <select class="filter-select" [(ngModel)]="selectedStatus" (ngModelChange)="onFilterChange()">
                <option value="">{{ 'ADMIN.STATUS.ALL' | translate }}</option>
                <option value="active">{{ 'ADMIN.STATUS.ACTIVE' | translate }}</option>
                <option value="inactive">{{ 'ADMIN.STATUS.INACTIVE' | translate }}</option>
            </select>

            <select class="filter-select" [(ngModel)]="selectedFeatured" (ngModelChange)="onFilterChange()">
                <option value="">All Types</option>
                <option value="featured">{{ 'ADMIN.BRANDS.TH_FEATURED' | translate }}</option>
                <option value="not-featured">Standard</option>
            </select>

            <button class="btn-clear-filters" *ngIf="selectedStatus || searchTerm || selectedFeatured"
                (click)="searchTerm = ''; selectedStatus = ''; selectedFeatured = ''; onFilterChange()">
                Reset
            </button>
        </div>

        <div class="table-glass-container">
            <table class="rich-table">
                <thead>
                    <tr>
                        <th class="w-16">{{ 'ADMIN.BRANDS.TH_LOGO' | translate }}</th>
                        <th class="sortable" (click)="onSortChange('name')">
                            {{ 'ADMIN.BRANDS.TH_NAME' | translate }}
                            <span *ngIf="sortField === 'name'">{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span>
                        </th>
                        <th class="sortable" (click)="onSortChange('country')">
                            {{ 'ADMIN.BRANDS.TH_COUNTRY' | translate }}
                            <span *ngIf="sortField === 'country'">{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span>
                        </th>
                        <th>{{ 'ADMIN.BRANDS.TH_WEBSITE' | translate }}</th>
                        <th class="w-24 text-center">{{ 'ADMIN.BRANDS.TH_STATUS' | translate }}</th>
                        <th class="w-24 text-right">{{ 'ADMIN.COMMON.ACTIONS' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let brand of paginatedBrands | async">
                        <td>
                            <div class="img-thumbnail" style="width: 48px; height: 48px;">
                                <img *ngIf="brand.logoUrl" [src]="brand.logoUrl" [alt]="brand.name">
                                <span *ngIf="!brand.logoUrl" class="brand-initial">{{ brand.name.charAt(0) }}</span>
                                <div *ngIf="!brand.logoUrl && !brand.name" class="img-placeholder">?</div>
                            </div>
                        </td>
                        <td>
                            <div class="product-identity">
                                <span class="product-name" [routerLink]="['/admin/brands', brand.id, 'edit']">
                                    {{ brand.name }}
                                </span>
                                <div class="badges-row" *ngIf="brand.featured">
                                    <span class="mini-badge featured">Featured</span>
                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="text-muted" *ngIf="brand.countryOfOrigin">{{ brand.countryOfOrigin }}</span>
                            <span class="text-muted placeholder" *ngIf="!brand.countryOfOrigin">-</span>
                        </td>
                        <td>
                            <a *ngIf="brand.website" [href]="brand.website" target="_blank" class="link-external">
                                {{ brand.website }} ‚Üó
                            </a>
                            <span class="text-muted placeholder" *ngIf="!brand.website">-</span>
                        </td>
                        <td class="text-center">
                            <div class="stock-pill" [class.success]="brand.active" [class.danger]="!brand.active">
                                <span class="dot"></span>
                                <span class="status-text">{{ brand.active ? ('ADMIN.STATUS.ACTIVE' | translate) :
                                    ('ADMIN.STATUS.INACTIVE' | translate) }}</span>
                            </div>
                        </td>
                        <td class="text-right">
                            <div class="row-actions justify-end">
                                <button class="btn-icon-ghost" [routerLink]="['/admin/brands', brand.id, 'edit']"
                                    [title]="'ADMIN.COMMON.EDIT' | translate">
                                    ‚úèÔ∏è
                                </button>
                                <button class="btn-icon-ghost danger" (click)="deleteBrand(brand)"
                                    [title]="'ADMIN.COMMON.DELETE' | translate">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr *ngIf="(paginatedBrands | async)?.length === 0">
                        <td colspan="6" class="no-data">
                            {{ 'ADMIN.BRANDS.EMPTY' | translate }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="pagination-wrapper" *ngIf="paginationConfig.totalItems > 0">
            <app-pagination [config]="paginationConfig" (pageChange)="onPageChange($event)"
                (itemsPerPageChange)="onItemsPerPageChange($event)">
            </app-pagination>
        </div>
    </main>
</div>