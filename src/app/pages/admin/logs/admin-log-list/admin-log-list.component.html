<div class="product-dashboard-layout">
    <!-- Sticky Command Header -->
    <header class="command-header">
        <div class="header-left">
            <div class="header-title-section">
                <h1 class="page-title">{{ 'ADMIN.LOGS.TITLE' | translate }}</h1>
                <span class="product-badge" *ngIf="paginationConfig.totalItems as count">
                    {{ count }}
                </span>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="product-grid-view">

        <!-- Toolbar Card -->
        <div class="toolbar-card" *ngIf="!loading && !error">
            <!-- Unified Search & Filter Toolbar -->
            <div class="table-toolbar">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()"
                        [placeholder]="'ADMIN.LOGS.SEARCH_PLACEHOLDER' | translate">
                </div>

                <div class="toolbar-actions">
                    <!-- Module Filter -->
                    <select class="filter-select" [(ngModel)]="selectedModule" (ngModelChange)="onFilterChange()">
                        <option value="">{{ 'ADMIN.LOGS.FILTERS.ALL_MODULES' | translate }}</option>
                        <option *ngFor="let m of modules" [value]="m">{{ m }}</option>
                    </select>

                    <!-- Action Filter -->
                    <select class="filter-select" [(ngModel)]="selectedAction" (ngModelChange)="onFilterChange()">
                        <option value="">{{ 'ADMIN.LOGS.FILTERS.ALL_ACTIONS' | translate }}</option>
                        <option *ngFor="let a of actions" [value]="a">{{ a }}</option>
                    </select>

                    <button class="btn-clear-filters" *ngIf="selectedModule || selectedAction || searchTerm"
                        (click)="clearFilters()">
                        {{ 'ADMIN.COMMON.CLEAR_FILTERS' | translate }}
                    </button>
                </div>
            </div>
        </div>

        <!-- Table Card -->
        <div class="table-card">
            <table class="rich-table">
                <thead>
                    <tr>
                        <th style="width: 180px;">{{ 'ADMIN.LOGS.TH_DATE' | translate }}</th>
                        <th style="width: 250px;">{{ 'ADMIN.LOGS.TH_USER' | translate }}</th>
                        <th style="width: 140px;">{{ 'ADMIN.LOGS.TH_IP' | translate }}</th>
                        <th style="width: 120px;">{{ 'ADMIN.LOGS.TH_MODULE' | translate }}</th>
                        <th style="width: 120px;">{{ 'ADMIN.LOGS.TH_ACTION' | translate }}</th>
                        <th>{{ 'ADMIN.LOGS.TH_DETAILS' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="loading">
                        <td colspan="6" class="loading-state">
                            <div class="spinner"></div>
                            <p>{{ 'ADMIN.COMMON.LOADING' | translate }}</p>
                        </td>
                    </tr>

                    <tr *ngFor="let log of displayedLogs">
                        <td class="timestamp-cell">{{ log.timestamp | date:'MMM d, y, h:mm a' }}</td>
                        <td class="user-cell">{{ log.userEmail }}</td>
                        <td><span class="badg-ip">{{ log.ipAddress || '‚Äî' }}</span></td>
                        <td><span class="badge-module" [attr.data-module]="log.module">{{ log.module }}</span></td>
                        <td><span class="badge-action" [attr.data-action]="log.action">{{ log.action }}</span></td>
                        <td class="details-cell">{{ log.details }}</td>
                    </tr>

                    <tr *ngIf="displayedLogs.length === 0 && !loading">
                        <td colspan="6" class="no-data">
                            <p>{{ 'ADMIN.LOGS.EMPTY' | translate }}</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination-wrapper" *ngIf="paginationConfig.totalItems > 0">
            <app-pagination [config]="paginationConfig" (pageChange)="onPageChange($event)"
                (itemsPerPageChange)="onItemsPerPageChange($event)">
            </app-pagination>
        </div>

        <div *ngIf="error" class="error-state">
            <p>{{ 'ADMIN.COMMON.ERROR' | translate }}</p>
        </div>

    </main>
</div>