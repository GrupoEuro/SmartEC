<div class="product-dashboard-layout">
    <!-- Sticky Command Header -->
    <header class="command-header">
        <div class="header-left">
            <h1 class="page-title">{{ 'ADMIN.ORDERS.TITLE' | translate }}</h1>
            <span class="product-count" *ngIf="paginationConfig.totalItems > 0">
                {{ paginationConfig.totalItems }}
            </span>
        </div>

        <div class="header-right">
            <button class="btn-primary-action" (click)="handleExport()">
                <span class="icon">üì•</span>
                <span class="text">{{ 'ADMIN.COMMON.EXPORT' | translate }}</span>
            </button>
        </div>
    </header>

    <div class="product-grid-view">
        <!-- Unified Toolbar -->
        <div class="table-toolbar">
            <!-- Search -->
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" [formControl]="searchControl"
                    [placeholder]="'ADMIN.ORDERS.SEARCH_PLACEHOLDER' | translate">
            </div>

            <!-- Status Filter -->
            <select class="filter-select" (change)="setFilter($any($event.target).value)">
                <option value="all">{{ 'ADMIN.ORDERS.STATUS.ALL' | translate }}</option>
                <option *ngFor="let tab of statusTabs | slice:1" [value]="tab.id">
                    {{ 'ADMIN.ORDERS.STATUS.' + tab.id.toUpperCase() | translate }}
                </option>
            </select>

            <!-- Clear Filters -->
            <button *ngIf="currentStatus !== 'all' || searchControl.value" class="btn-clear-filters"
                (click)="clearFilters()">
                {{ 'ADMIN.COMMON.CLEAR_FILTERS' | translate }}
            </button>
        </div>

        <!-- Glass Table -->
        <div class="table-glass-container">
            <table class="rich-table">
                <thead>
                    <tr>
                        <th class="sortable" (click)="onSort('orderNumber')">
                            {{ 'ADMIN.ORDERS.TABLE.ORDER_NUMBER' | translate }}
                        </th>
                        <th class="sortable" (click)="onSort('date')">
                            {{ 'ADMIN.ORDERS.TABLE.DATE' | translate }}
                        </th>
                        <th>{{ 'ADMIN.ORDERS.TABLE.CUSTOMER' | translate }}</th>
                        <th class="text-right sortable" (click)="onSort('total')">
                            {{ 'ADMIN.ORDERS.TABLE.TOTAL' | translate }}
                        </th>
                        <th>{{ 'ADMIN.ORDERS.TABLE.STATUS' | translate }}</th>
                        <th>{{ 'ADMIN.ORDERS.TABLE.ACTIONS' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let order of paginatedOrders">
                        <td>
                            <span class="order-number">#{{ order.orderNumber }}</span>
                        </td>
                        <td>
                            <div class="product-info">
                                <strong>{{ $any(order.createdAt) | date:'mediumDate' }}</strong>
                                <span class="text-muted">{{ $any(order.createdAt) | date:'shortTime' }}</span>
                            </div>
                        </td>
                        <td>
                            <div class="product-identity">
                                <span class="product-name" [routerLink]="['/admin/orders', order.id]">
                                    {{ order.customer.name }}
                                </span>
                                <span class="product-sku">{{ order.customer.email }}</span>
                            </div>
                        </td>
                        <td class="text-right">
                            <span class="price-text">{{ order.total | currency }}</span>
                        </td>
                        <td>
                            <div class="stock-pill" [ngClass]="getStatusClass(order.status)">
                                <span class="dot"></span>
                                <span>
                                    {{ 'ADMIN.ORDERS.STATUS.' + order.status.toUpperCase() | translate }}
                                </span>
                            </div>
                        </td>
                        <td>
                            <div class="row-actions">
                                <a [routerLink]="['/admin/orders', order.id]" class="btn-icon-ghost"
                                    [title]="'ADMIN.COMMON.VIEW' | translate">
                                    üëÅÔ∏è
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- Empty State -->
                    <tr *ngIf="!isLoading && paginationConfig.totalItems === 0">
                        <td colspan="6" class="no-data">
                            {{ 'ADMIN.ORDERS.NO_RESULTS' | translate }}
                        </td>
                    </tr>

                    <!-- Loading State -->
                    <tr *ngIf="isLoading">
                        <td colspan="6" class="no-data">
                            {{ 'ADMIN.COMMON.LOADING' | translate }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination-wrapper" *ngIf="paginationConfig.totalItems > 0">
            <app-pagination [config]="paginationConfig" (pageChange)="onPageChange($event)">
            </app-pagination>
        </div>
    </div>
</div>