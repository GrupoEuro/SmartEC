<app-admin-page-header icon="üì¶" [title]="'ADMIN.ORDERS.TITLE' | translate"
    [subtitle]="'ADMIN.ORDERS.SUBTITLE' | translate">
    <!-- No "Add Order" button for now, as orders come from store -->
</app-admin-page-header>

<div class="list-container">
    <!-- Filters & Search -->
    <!-- Filters & Search -->
    <div class="filters-bar">
        <div class="search-and-filters">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" [formControl]="searchControl"
                    [placeholder]="'ADMIN.ORDERS.SEARCH_PLACEHOLDER' | translate" class="search-input">
            </div>
        </div>

        <button class="btn-primary small icon" (click)="handleExport()">
            üì• {{ 'ADMIN.COMMON.EXPORT' | translate }}
        </button>
    </div>

    <!-- Filters Bar (Status) -->
    <div class="filters-bar" style="margin-top: 1rem;">
        <div class="status-tabs">
            <button *ngFor="let tab of statusTabs" [class.active]="currentStatus === tab.id" (click)="setFilter(tab.id)"
                class="tab-btn">
                {{ 'ADMIN.ORDERS.STATUS.' + tab.id.toUpperCase() | translate }}
                <span class="count-badge">{{ tab.count }}</span>
            </button>
        </div>
    </div>

    <!-- Data Table -->
    <div class="table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>{{ 'ADMIN.ORDERS.TABLE.ORDER_NUMBER' | translate }}</th>
                    <th>{{ 'ADMIN.ORDERS.TABLE.DATE' | translate }}</th>
                    <th>{{ 'ADMIN.ORDERS.TABLE.CUSTOMER' | translate }}</th>
                    <th>{{ 'ADMIN.ORDERS.TABLE.TOTAL' | translate }}</th>
                    <th>{{ 'ADMIN.ORDERS.TABLE.STATUS' | translate }}</th>
                    <th class="actions-col">{{ 'ADMIN.ORDERS.TABLE.ACTIONS' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let order of paginatedOrders">
                    <td class="primary-text">#{{ order.orderNumber }}</td>
                    <td>{{ $any(order.createdAt) | date:'mediumDate' }}</td>
                    <td>
                        <div class="customer-cell">
                            <span class="name">{{ order.customer.name }}</span>
                            <span class="email">{{ order.customer.email }}</span>
                        </div>
                    </td>
                    <td class="price-text">{{ order.total | currency }}</td>
                    <td>
                        <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                            {{ 'ADMIN.ORDERS.STATUS.' + order.status.toUpperCase() | translate }}
                        </span>
                    </td>
                    <td class="actions-cell">
                        <a [routerLink]="['/admin/orders', order.id]" class="btn-icon"
                            [title]="'ADMIN.COMMON.VIEW' | translate">
                            üëÅÔ∏è
                        </a>
                    </td>
                </tr>

                <!-- Empty State -->
                <tr *ngIf="!isLoading && paginationConfig.totalItems === 0">
                    <td colspan="6" class="empty-state">
                        <div class="empty-content">
                            <span class="empty-icon">üì¶</span>
                            <h3>{{ 'ADMIN.ORDERS.EMPTY' | translate }}</h3>
                            <p>{{ 'ADMIN.ORDERS.NO_RESULTS' | translate }}</p>
                        </div>
                    </td>
                </tr>

                <!-- Loading State -->
                <tr *ngIf="isLoading">
                    <td colspan="6" class="loading-state">
                        {{ 'ADMIN.COMMON.LOADING' | translate }}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <app-pagination [config]="paginationConfig" (pageChange)="onPageChange($event)">
    </app-pagination>
</div>