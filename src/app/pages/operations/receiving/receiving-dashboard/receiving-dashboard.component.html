<div class="h-full flex flex-col bg-zinc-950">
    <!-- Header -->
    <div class="bg-zinc-900/50 border-b border-zinc-800 px-6 py-4">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-2xl font-bold text-white flex items-center gap-3">
                    <app-icon name="package" [size]="32" class="text-purple-400"></app-icon>
                    Receiving Dashboard
                </h1>
                <p class="text-zinc-400 text-sm mt-1">Manage incoming shipments and putaway tasks</p>
            </div>
            <div class="flex gap-3">
                <button (click)="viewPutawayTasks()"
                    class="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-all flex items-center gap-2">
                    <app-icon name="check-square" [size]="18"></app-icon>
                    Putaway Tasks
                </button>
                <button (click)="createManualReceipt()"
                    class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-all flex items-center gap-2">
                    <app-icon name="plus" [size]="18"></app-icon>
                    Manual Receipt
                </button>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="flex-1 overflow-auto p-6">
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">

            <!-- Expected Arrivals (Pending ASNs) -->
            <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg">
                <div class="px-6 py-4 border-b border-zinc-800">
                    <h2 class="text-lg font-bold text-white flex items-center gap-2">
                        <app-icon name="truck" [size]="20" class="text-yellow-400"></app-icon>
                        Expected Arrivals
                        <span class="ml-2 px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs rounded-full">
                            {{ pendingASNs().length }}
                        </span>
                    </h2>
                </div>

                <div class="p-4">
                    <!-- Loading State -->
                    <div *ngIf="loading()" class="text-center py-12">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto"></div>
                        <p class="text-zinc-500 mt-4">Loading arrivals...</p>
                    </div>

                    <!-- Empty State -->
                    <div *ngIf="!loading() && pendingASNs().length === 0" class="text-center py-12">
                        <app-icon name="inbox" [size]="48" class="text-zinc-600 mx-auto mb-4"></app-icon>
                        <p class="text-zinc-500">No pending arrivals</p>
                    </div>

                    <!-- ASN List -->
                    <div *ngIf="!loading() && pendingASNs().length > 0" class="space-y-3">
                        <div *ngFor="let asn of pendingASNs()"
                            class="bg-zinc-800/50 hover:bg-zinc-800 border border-zinc-700 hover:border-purple-500 rounded-lg p-4 cursor-pointer transition-all group"
                            (click)="startReceiving(asn)">
                            <div class="flex items-start justify-between mb-3">
                                <div>
                                    <div class="text-white font-bold text-lg">{{ asn.asnNumber }}</div>
                                    <div class="text-zinc-400 text-sm">{{ asn.supplierName }}</div>
                                </div>
                                <span
                                    [class]="'px-3 py-1 rounded-full text-xs font-medium border ' + getStatusColor(asn.status)">
                                    {{ asn.status }}
                                </span>
                            </div>

                            <div class="flex items-center gap-4 text-sm">
                                <div class="flex items-center gap-1 text-zinc-400">
                                    <app-icon name="calendar" [size]="14"></app-icon>
                                    <span>{{ formatDate(asn.expectedDate) }}</span>
                                </div>
                                <div class="flex items-center gap-1 text-zinc-400">
                                    <app-icon name="package" [size]="14"></app-icon>
                                    <span>{{ asn.items.length }} items</span>
                                </div>
                            </div>

                            <div class="mt-3 flex items-center justify-end">
                                <button
                                    class="px-4 py-2 bg-purple-600 group-hover:bg-purple-500 text-white rounded text-sm transition-all">
                                    Start Receiving
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent GRNs -->
            <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg">
                <div class="px-6 py-4 border-b border-zinc-800">
                    <h2 class="text-lg font-bold text-white flex items-center gap-2">
                        <app-icon name="clipboard-check" [size]="20" class="text-emerald-400"></app-icon>
                        Recent Receipts
                    </h2>
                </div>

                <div class="p-4">
                    <!-- Empty State -->
                    <div *ngIf="recentGRNs().length === 0" class="text-center py-12">
                        <app-icon name="file-text" [size]="48" class="text-zinc-600 mx-auto mb-4"></app-icon>
                        <p class="text-zinc-500">No recent receipts</p>
                    </div>

                    <!-- GRN List -->
                    <div *ngIf="recentGRNs().length > 0" class="space-y-3">
                        <div *ngFor="let grn of recentGRNs()"
                            class="bg-zinc-800/50 hover:bg-zinc-800 border border-zinc-700 hover:border-emerald-500 rounded-lg p-4 cursor-pointer transition-all"
                            (click)="viewGRN(grn)">
                            <div class="flex items-start justify-between mb-3">
                                <div>
                                    <div class="text-white font-bold">{{ grn.grnNumber }}</div>
                                    <div class="text-zinc-400 text-xs">{{ formatDate(grn.receivedDate) }}</div>
                                </div>
                                <span
                                    [class]="'px-3 py-1 rounded-full text-xs font-medium border ' + getStatusColor(grn.status)">
                                    {{ grn.status }}
                                </span>
                            </div>

                            <div class="text-sm text-zinc-400">
                                {{ grn.items.length }} items received
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>