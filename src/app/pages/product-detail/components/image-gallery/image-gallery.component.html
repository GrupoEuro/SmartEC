<div class="gallery-container">
    <!-- Main Image Area -->
    <div class="main-image-wrapper">
        <div class="main-image" #mainImgContainer (mousemove)="onMouseMove($event)" (mouseleave)="onMouseLeave()"
            (click)="openLightbox(selectedImageIndex)">
            <img [ngSrc]="images[selectedImageIndex] || 'assets/images/euro-logo-new.png'" [alt]="productName"
                width="600" height="600" priority class="hero-img">

            <div class="zoom-hint" *ngIf="!showZoom">üîç Click to expand</div>
        </div>

        <!-- Flyout Zoom Window -->
        <div class="zoom-flyout" *ngIf="showZoom" [style.background-image]="'url(' + images[selectedImageIndex] + ')'"
            [style.background-position]="zoomPosition.x + '% ' + zoomPosition.y + '%'">
        </div>
    </div>

    <!-- Thumbnails -->
    <div class="thumbnails" *ngIf="images.length > 1">
        <button *ngFor="let image of images; let i = index" class="thumbnail" [class.active]="i === selectedImageIndex"
            (click)="selectImage(i)">
            <img [ngSrc]="image" [alt]="productName + ' - View ' + (i + 1)" width="80" height="80" class="thumb-img">
        </button>
    </div>
</div>

<!-- Lightbox Modal -->
<div class="lightbox-overlay" *ngIf="isLightboxOpen" (click)="closeLightbox()">
    <div class="lightbox-content" (click)="$event.stopPropagation()">
        <button class="lightbox-close" (click)="closeLightbox()">‚úï</button>

        <button class="lightbox-nav lightbox-prev" (click)="previousImage()" *ngIf="images.length > 1">
            ‚Äπ
        </button>

        <img [src]="images[selectedImageIndex]" [alt]="productName" />

        <button class="lightbox-nav lightbox-next" (click)="nextImage()" *ngIf="images.length > 1">
            ‚Ä∫
        </button>

        <div class="lightbox-counter" *ngIf="images.length > 1">
            {{ selectedImageIndex + 1 }} / {{ images.length }}
        </div>
    </div>
</div>